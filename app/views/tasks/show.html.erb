<div class="container-fluid">
  <h1>
    <%= @task.title %>
  </h1>
    <table class="table">
      <tbody>
        <tr>
          <th><%= t(:task_title) %></th>
          <td><%= @task.title %></td>
        </tr>
        <tr>
          <th><%= t(:task_description) %></th>
          <td><%= @task.description %></td>
        </tr>
        <tr>
          <th><%= t(:task_status) %></th>
          <td><%= @task.status %></td>
        </tr>
        <tr>
          <th><%= t(:task_priority) %></th>
          <td><%= Task::PRIORITY.key @task.priority %></td>
        </tr>
        <tr>
          <th><%= t(:task_progress) %></th>
          <td><%= @task&.progress %></td>
        </tr>
        <tr>
          <th><%= t(:task_created_by) %></th>
          <td><%= User.find(@task&.created_by_id).first_name + " " + User.find(@task&.created_by_id).last_name %></td>
        </tr>
        <tr>
          <th><%= t(:task_assignee) %></th>
          <td><%= User.find(@task&.assignable_id).first_name + " " + User.find(@task&.assignable_id).last_name %></td>
        </tr>
        <tr>
          <th><%= t(:task_project_id) %></th>
          <td><%= Project.find(@task&.project_id).name %></td>
        </tr>
        <tr>
          <th><%= t(:task_due_date) %></th>
          <td><%= @task.due_date&.to_s(:long) %></td>
        </tr>
        <tr>
          <th><%= t(:task_start_date) %></th>
          <td><%= @task.start_date&.to_s(:long) %></td>
        </tr>
        <tr>
          <th><%= t(:task_end_date) %></th>
          <td><%= @task.end_date&.to_s(:long) %></td>
        </tr>
        <tr>
          <th><%= t(:task_expected_start_date) %></th>
          <td><%= @task.expected_start_date&.to_s(:long) %></td>
        </tr>
        <tr>
          <th><%= t(:task_expected_end_date) %></th>
          <td><%= @task.expected_end_date&.to_s(:long) %></td>
        </tr>
        
      </tbody>
    </table>
    <div class="btn-group" role="group">
      <% if can? :destroy, @task %>
        <%= button_to 'Delete', task_path(@task), class: 'ml-3 btn btn-dark',
            method: :delete, data: { confirm: 'Are you sure you want to delete?' } %>
      <% end %>

      <% if can? :update, @task %>
        <%= link_to 'Update', edit_task_path(@task.sequence_num), class: 'ml-3 btn btn-dark' %>
      <% end %>

      <%= button_to 'Watch', task_path(@task), class: 'ml-3 btn btn-dark' %>
      <%= button_to 'Add Watcher', task_path(@task), class: 'ml-3 btn btn-dark' %>
      <%= button_to 'Remove Watcher', task_path(@task), class: 'ml-3 btn btn-dark',
          method: :delete, data: { confirm: 'Are you sure you want to delete watcher?' } %>
    </div>
  </div>
